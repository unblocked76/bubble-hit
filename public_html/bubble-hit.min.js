!function(){function W(t,e,n){return t.call.apply(t.bind,arguments)}function F(e,n,t){var i;if(e)return 2<arguments.length?(i=Array.prototype.slice.call(arguments,2),function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}):function(){return e.apply(n,arguments)};throw Error()}function f(t,e,n){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?W:F).apply(null,arguments)}var r=Date.now||function(){return+new Date};function M(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var H=!!window.FontFace;function l(t,e,n,i){if(e=t.c.createElement(e),n)for(var s in n)n.hasOwnProperty(s)&&("style"==s?e.style.cssText=n[s]:e.setAttribute(s,n[s]));return i&&e.appendChild(t.c.createTextNode(i)),e}function h(t,e,n){(t=(t=t.c.getElementsByTagName(e)[0])||document.documentElement).insertBefore(n,t.lastChild)}function n(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),s=0;s<e.length;s+=1){for(var o=!1,a=0;a<i.length;a+=1)if(e[s]===i[a]){o=!0;break}o||i.push(e[s])}for(e=[],s=0;s<i.length;s+=1){for(o=!1,a=0;a<n.length;a+=1)if(i[s]===n[a]){o=!0;break}o||e.push(i[s])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function o(t,e){for(var n=t.className.split(/\s+/),i=0,s=n.length;i<s;i++)if(n[i]==e)return!0;return!1}function x(t,e,n){function i(){a&&s&&(a(o),a=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var s=!1,o=null,a=n||null;H?(e.onload=function(){s=!0,i()},e.onerror=function(){s=!0,o=Error("Stylesheet failed to load"),i()}):setTimeout(function(){s=!0,i()},0),h(t,"head",e)}function i(t,e,n,i){var s,o,a=t.c.getElementsByTagName("head")[0];return a?(s=l(t,"script",{src:e}),o=!1,s.onload=s.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,n&&n(null),s.onload=s.onreadystatechange=null,"HEAD"==s.parentNode.tagName&&a.removeChild(s))},a.appendChild(s),setTimeout(function(){o||(o=!0,n&&n(Error("Script load timeout")))},i||5e3),s):null}function B(){this.a=0,this.c=null}function A(t){return t.a++,function(){t.a--,s(t)}}function C(t,e){t.c=e,s(t)}function s(t){0==t.a&&t.c&&(t.c(),t.c=null)}function a(t){this.a=t||"-"}function P(t,e){this.c=t,this.f=4,this.a="n";t=(e||"n4").match(/^([nio])([1-9])$/i);t&&(this.a=t[1],this.f=parseInt(t[2],10))}function u(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function b(t){return t.a+t.f}function c(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function R(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new a("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function m(t){var e,n,i;t.g&&(e=o(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")],e||n.push(t.a.c("wf","inactive")),g(t.f,n,i)),_(t,"inactive")}function _(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,b(n)):t.h[e]())}function N(){this.c={}}function d(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function p(t){h(t.c,"body",t.a)}function v(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+u(t.c)+";font-style:"+c(t)+";font-weight:"+t.f+"00;"}function S(t,e,n,i,s,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=s||3e3,this.h=o||void 0}function y(t,e,n,i,s,o,a){this.v=t,this.B=e,this.c=n,this.a=i,this.s=a||"BESbswy",this.f={},this.w=s||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new d(this.c,this.s),this.h=new d(this.c,this.s),this.j=new d(this.c,this.s),this.m=new d(this.c,this.s),t=v(t=new P(this.a.c+",serif",b(this.a))),this.g.a.style.cssText=t,t=v(t=new P(this.a.c+",sans-serif",b(this.a))),this.h.a.style.cssText=t,t=v(t=new P("serif",b(this.a))),this.j.a.style.cssText=t,t=v(t=new P("sans-serif",b(this.a))),this.m.a.style.cssText=t,p(this.g),p(this.h),p(this.j),p(this.m)}a.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},S.prototype.start=function(){var s=this.c.o.document,o=this,a=r(),t=new Promise(function(n,i){!function e(){var t;r()-a>=o.f?i():s.fonts.load(c(t=o.a)+" "+t.f+"00 300px "+u(t.c),o.h).then(function(t){1<=t.length?n():setTimeout(e,25)},function(){i()})}()}),n=null,e=new Promise(function(t,e){n=setTimeout(e,o.f)});Promise.race([e,t]).then(function(){n&&(clearTimeout(n),n=null),o.g(o.a)},function(){o.j(o.a)})};var w={D:"serif",C:"sans-serif"},e=null;function T(){var t;return null===e&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),e=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)),e}function E(t,e,n){for(var i in w)if(w.hasOwnProperty(i)&&e===t.f[w[i]]&&n===t.f[w[i]])return!0;return!1}function I(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=(e=n===t.f.serif&&i===t.f["sans-serif"])?e:T()&&E(t,n,i))?r()-t.A>=t.w?T()&&E(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?L(t,t.v):L(t,t.B):setTimeout(f(function(){I(this)},t),50):L(t,t.v)}function L(t,e){setTimeout(f(function(){n(this.g.a),n(this.h.a),n(this.j.a),n(this.m.a),e(this.a)},t),0)}function G(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}y.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=r(),I(this)};var k=null;function O(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&g(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),_(t,"active")):m(t.a))}function U(t){this.j=t,this.a=new N,this.h=0,this.f=this.g=!0}function V(t,e){this.c=t,this.a=e}function z(t,e){this.c=t,this.a=e}function j(t,e){this.c=t||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=e||""}G.prototype.g=function(t){var e=this.a;e.g&&g(e.f,[e.a.c("wf",t.c,b(t).toString(),"active")],[e.a.c("wf",t.c,b(t).toString(),"loading"),e.a.c("wf",t.c,b(t).toString(),"inactive")]),_(e,"fontactive",t),this.m=!0,O(this)},G.prototype.h=function(t){var e,n,i,s=this.a;s.g&&(e=o(s.f,s.a.c("wf",t.c,b(t).toString(),"active")),n=[],i=[s.a.c("wf",t.c,b(t).toString(),"loading")],e||n.push(s.a.c("wf",t.c,b(t).toString(),"inactive")),g(s.f,n,i)),_(s,"fontinactive",t),O(this)},U.prototype.load=function(t){this.c=new M(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes;var i=this,e=new R(this.c,t),n=t,s=[],t=n.timeout,s=(function(t){t.g&&g(t.f,[t.a.c("wf","loading")]),_(t,"loading")}(e),function(t,e,n){var i,s,o=[];for(i in e)!e.hasOwnProperty(i)||(s=t.c[i])&&o.push(s(e[i],n));return o}(i.a,n,i.c)),o=new G(i.c,e,t);for(i.h=s.length,e=0,n=s.length;e<n;e++)s[e].load(function(t,e,n){var h,u,c,d,p;h=o,u=t,c=e,d=n,p=0==--(t=i).h,(t.f||t.g)&&setTimeout(function(){var t=d||null,e=c||{};if(0===u.length&&p)m(h.a);else{h.f+=u.length,p&&(h.j=p);for(var n=[],i=0;i<u.length;i++){var s,o=u[i],a=e[o.c],r=h.a,l=o;r.g&&g(r.f,[r.a.c("wf",l.c,b(l).toString(),"loading")]),_(r,"fontloading",l),r=(k=(r=null)===k?!!window.FontFace&&(l=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),s=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor),l?42<parseInt(l[1],10):!s):k)?new S(f(h.g,h),f(h.h,h),h.c,o,h.s,a):new y(f(h.g,h),f(h.h,h),h.c,o,h.s,t,a),n.push(r)}for(i=0;i<n.length;i++)n[i].start()}},0)})},V.prototype.load=function(a){var r,e=this,l=e.a.projectId,t=e.a.version;l?(r=e.c.o,i(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+l+".js"+(t?"?v="+t:""),function(t){t?a([]):(r["__MonotypeConfiguration__"+l]=function(){return e.a},function t(){if(r["__mti_fntLst"+l]){var e,n=r["__mti_fntLst"+l](),i=[];if(n)for(var s=0;s<n.length;s++){var o=n[s].fontfamily;null!=n[s].fontStyle&&null!=n[s].fontWeight?(e=n[s].fontStyle+n[s].fontWeight,i.push(new P(o,e))):i.push(new P(o))}a(i)}else setTimeout(function(){t()},50)}())}).id="__MonotypeAPIScript__"+l):a([])},z.prototype.load=function(t){for(var e=this.a.urls||[],n=this.a.families||[],i=this.a.testStrings||{},s=new B,o=0,a=e.length;o<a;o++)x(this.c,e[o],A(s));var r=[];for(o=0,a=n.length;o<a;o++)if((e=n[o].split(":"))[1])for(var l=e[1].split(","),h=0;h<l.length;h+=1)r.push(new P(e[0],l[h]));else r.push(new P(e[0]));C(s,function(){t(r,i)})};function K(t){this.f=t,this.a=[],this.c={}}var q={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},X={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Y={i:"i",italic:"i",n:"n",normal:"n"},$=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function J(t,e){this.c=t,this.a=e}var Q={Arimo:!0,Cousine:!0,Tinos:!0};function Z(t,e){this.c=t,this.a=e}function tt(t,e){this.c=t,this.f=e,this.a=[]}J.prototype.load=function(t){for(var e=new B,n=this.c,i=new j(this.a.api,this.a.text),s=this.a.families,o=i,a=s,r=a.length,l=0;l<r;l++){var h=a[l].split(":"),u=(3==h.length&&o.f.push(h.pop()),"");2==h.length&&""!=h[1]&&(u=":"),o.a.push(h.join(u))}for(var c=new K(s),d=c,p=d.f.length,f=0;f<p;f++){var g=d.f[f].split(":"),b=g[0].replace(/\+/g," "),m=["n4"];if(2<=g.length){var _,v,S=g[1],y=[];if(S)for(var w=(S=S.split(",")).length,T=0;T<w;T++)(v=!(v=S[T]).match(/^[\w-]+$/)||null==(_=$.exec(v.toLowerCase()))?"":[v=null==(v=_[2])||""==v?"n":Y[v],_=null==(_=_[1])||""==_?"4":X[_]||(isNaN(_)?"4":_.substr(0,1))].join(""))&&y.push(v);0<y.length&&(m=y),3==g.length&&(y=[],0<(g=(g=g[2])?g.split(","):y).length&&(g=q[g[0]])&&(d.c[b]=g))}for(d.c[b]||(g=q[b])&&(d.c[b]=g),g=0;g<m.length;g+=1)d.a.push(new P(b,m[g]))}x(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),A(e)),C(e,function(){t(c.a,c.c,Q)})},Z.prototype.load=function(a){var t=this.a.id,r=this.c.o;t?i(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)a([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var e=[],n=0;n<t.length;n+=2)for(var i=t[n],s=t[n+1],o=0;o<s.length;o++)e.push(new P(i,s[o]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}a(e)}},2e3):a([])},tt.prototype.load=function(l){var t=this.f.id,e=this.c.o,h=this;t?(e.__webfontfontdeckmodule__||(e.__webfontfontdeckmodule__={}),e.__webfontfontdeckmodule__[t]=function(t,e){for(var n,i,s,o=0,a=e.fonts.length;o<a;++o){var r=e.fonts[o];h.a.push(new P(r.name,(r="font-weight:"+r.weight+";font-style:"+r.style,s=i=n=void 0,n=4,i="n",s=null,r&&((s=r.match(/(normal|oblique|italic)/i))&&s[1]&&(i=s[1].substr(0,1).toLowerCase()),(s=r.match(/([1-9]00|normal|bold)/i))&&s[1]&&(/bold/i.test(s[1])?n=7:/[1-9]00/.test(s[1])&&(n=parseInt(s[1].substr(0,1),10)))),i+n)))}l(h.a)},i(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((e=this.c).o.location.hostname||e.a.location.hostname)+"/"+t+".js",function(t){t&&l([])})):l([])};var t=new U(window),D=(t.a.c.custom=function(t,e){return new z(e,t)},t.a.c.fontdeck=function(t,e){return new tt(e,t)},t.a.c.monotype=function(t,e){return new V(e,t)},t.a.c.typekit=function(t,e){return new Z(e,t)},t.a.c.google=function(t,e){return new J(e,t)},{load:f(t.load,t)});"function"==typeof define&&define.amd?define(function(){return D}):"undefined"!=typeof module&&module.exports?module.exports=D:(window.WebFont=D,window.WebFontConfig&&t.load(window.WebFontConfig))}();var AzerionIntegration,Fabrique,BubbleShooter,BubbleHit,__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Atlases=(!function(n){t=Phaser.Game,__extends(i,t),i.prototype.statePreloader=function(){var e=this;libs.forEach(function(t){e.load.script(t,t)})},i.prototype.stateCreator=function(){function t(){e.recursiveUpdateText(e.stage)}var e=this;this.plugins.add(PhaserCachebuster.CacheBuster),this.plugins.add(PhaserSpine.SpinePlugin),this.plugins.add(PhaserSuperStorage.StoragePlugin),this.plugins.add(PhaserI18n.Plugin,{fallbackLng:"en",debug:!0,load:"languageOnly",backend:{loadPath:"assets/languages/{{lng}}.json"}},languageDetector),this.storage.setNamespace("BubbleHit"),Constants.init(this),this.state.add(n.Boot.Name,n.Boot,!1),this.state.add(n.Menu.Name,n.Menu,!1);WebFont.load({custom:{families:["Aller Display"],urls:["assets/css/AllerDisplay.css"]},active:t,inactive:t}),this.state.start(n.Boot.Name),this.state.remove("game")},i.prototype.recursiveUpdateText=function(t){var e=this;t instanceof Phaser.Text&&(t.dirty=!0),t.children&&0<t.children.length&&t.children.forEach(function(t){e.recursiveUpdateText(t)})};var t,e=i;function i(){var e=t.call(this,{enableDebug:!1,width:Constants.GAME_WIDTH,height:Constants.GAME_HEIGHT,renderer:Phaser.AUTO,parent:"content",antialias:!0,preserveDrawingBuffer:!1,physicsConfig:null,seed:"",state:null,forceSetTimeOut:!1})||this;return Phaser.Device.whenReady(function(){e.stage.disableVisibilityChange=!0;var t=e.device.desktop?"click":"touchstart";document.getElementById("content").addEventListener(t,function(t){e.gameResumed(t)})}),AzerionIntegration.SDK.createSplashLoader(e,function(){e.state.add("game",{create:e.stateCreator.bind(e),preload:e.statePreloader.bind(e)},!0),languageDetector=new i18nextBrowserLanguageDetector(null)}),e}n.App=e}(BubbleHit=BubbleHit||{}),!function(s){(t=o=o||{}).PAUSED="Paused",t.RESUMED="Resumed",e.getInstance=function(){return e.instance=e.instance?e.instance:new e},e.prototype.init=function(){azAdWrapper=new window.h5ads.AdWrapper(window._azerionIntegration.advType,Constants.GAMEDISTRIBUTION_ID)},e.prototype.showAd=function(t,e,n){var i=this;s.LoaderHelper.show(),azAdWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){s.LoaderHelper.hide(),n&&n.call(i),i.contentStatus=o.PAUSED,s.PauseHandler.getInstance().pause()}),azAdWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){s.LoaderHelper.hide(),azAdWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),azAdWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED),i.contentStatus=o.RESUMED,s.PauseHandler.getInstance().resume(),e&&e.call(i)}),azAdWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.isAdPlaying=function(){return this.contentStatus===o.PAUSED};var o,t=e;function e(){this.contentStatus=o.RESUMED}s.AdHandler=t}(Fabrique=Fabrique||{}),!function(i){function e(){}e.onLoadProgress=function(t){h5branding.SplashLoader.getInstance().setLoadProgress(t)},e.onLoadComplete=function(t,e){h5branding.SplashLoader.getInstance().setLoadProgress(100),Fabrique.PauseHandler.getInstance(t).init(),i.SDK.integrationEventHandler.dispatch(i.IntegrationEvents.SPLASH_LOAD_COMPLETE),e&&e()},e.createSplashLoader=function(t,e){var n;i.SDK.integrationEventHandler=new i.IntegrationEventHandler,i.SDK.integrationEventHandler.register(),null!=(n=window._azerionIntegration)&&n.sa&&(h5branding.Utils.ASSET_LOCATION="assets/"),Fabrique.AdHandler.getInstance().init(),h5branding.SplashLoader.getInstance({gameId:Constants.GAMEDISTRIBUTION_ID,gameName:Constants.GAME_TITLE,gameTitle:Constants.GAME_TITLE,libs:[],version:(null==(n=null==(n=window._azerionIntegration)?void 0:n.build)?void 0:n.version)||"fix-this"}).create().then(function(){i.SDK.integrationEventHandler.dispatch(i.IntegrationEvents.SPLASH_CREATED),e&&e()}).catch(function(t){})},e.removeSplashLoader=function(t){h5branding.SplashLoader.getInstance().setButtonCallback(function(){h5branding.SplashLoader.getInstance().destroy(),i.SDK.integrationEventHandler.dispatch(i.IntegrationEvents.SPLASH_REMOVED),e.showInterstitialAd(function(){t()})})},e.showInterstitialAd=function(t){Fabrique.AdHandler.getInstance().showAd("ad",function(){i.SDK.integrationEventHandler.dispatch(i.IntegrationEvents.GAME_LOAD_COMPLETE),t()})},e.isOnDevice=function(){return null===h5branding||void 0===h5branding?void 0:h5branding.Utils.isOnDevice()},e.outGoingLinksAllowed=function(){return h5branding.Branding.outGoingLinksAllowed()},e.isYandex=function(){return h5branding.Hosts.isYandex()},e.hideSponsorLogo=function(){return h5branding.Utils.getBrandingDomain()===h5branding.BrandingDomain.Neutral},i.SDK=e}(AzerionIntegration=AzerionIntegration||{}),!function(t){var s;function e(t,e,n){void 0===n&&(n=null);var i=s.call(this,t)||this;i.beginFill(e,1),i.drawRect(0,0,i.game.width,i.game.height);t.add.group(i,"white",!0).add(i);e=i.game.add.tween(i);return e.to({alpha:0},100),e.onComplete.add(function(){null!==n&&n()}),e.start(),i}t=t.Effects||(t.Effects={}),s=Phaser.Graphics,__extends(e,s),t.FadeFromColor=e}(Fabrique=Fabrique||{}),!function(t){var o;function e(t,e,n,i){var s=o.call(this,t)||this,e=(s.alpha=0,s.beginFill(e,1),s.drawRect(0,0,s.game.width,s.game.height),t.add.existing(s),s.game.add.tween(s));return e.to({alpha:1},100),e.onComplete.add(function(){t.state.start(n,!0,!1,i)}),e.start(),s}t=t.Effects||(t.Effects={}),o=Phaser.Graphics,__extends(e,o),t.FadeToColor=e}(Fabrique=Fabrique||{}),!function(t){function n(){}t=t.Effects||(t.Effects={}),n.fromTop=function(t,e){n.boundsSet||n.setBounds(t),t.world.cacheAsBitmap=!0,t.add.tween(t.camera).from({y:t.height},n.SlideTime,n.EaseIn,!0).onComplete.add(function(){void 0!==e&&e(),t.world.cacheAsBitmap=!1})},n.toRight=function(t,e){n.boundsSet||n.setBounds(t),t.world.cacheAsBitmap=!0,t.add.tween(t.camera).to({x:-t.width},n.SlideTime,n.EaseOut,!0).onComplete.add(function(){void 0!==e&&e(),t.world.cacheAsBitmap=!1})},n.fromRight=function(t,e){n.boundsSet||n.setBounds(t),t.world.cacheAsBitmap=!0,t.add.tween(t.camera).from({x:-t.width},n.SlideTime,n.EaseIn,!0).onComplete.add(function(){void 0!==e&&e(),t.world.cacheAsBitmap=!1})},n.toLeft=function(t,e){n.boundsSet||n.setBounds(t),t.world.cacheAsBitmap=!0,t.add.tween(t.camera).to({x:t.width},n.SlideTime,n.EaseOut,!0).onComplete.add(function(){void 0!==e&&e(),t.world.cacheAsBitmap=!1})},n.fromLeft=function(t,e){n.boundsSet||n.setBounds(t),t.world.cacheAsBitmap=!0,t.add.tween(t.camera).from({x:t.width},n.SlideTime,n.EaseIn,!0).onComplete.add(function(){void 0!==e&&e(),t.world.cacheAsBitmap=!1})},n.setBounds=function(t){t.world.setBounds(-t.width,-t.height,3*t.width,3*t.height),n.boundsSet=!0},n.SlideTime=250,n.EaseIn=Phaser.Easing.Quartic.Out,n.EaseOut=Phaser.Easing.Quartic.In,n.boundsSet=!1,t.SlideState=n}(Fabrique=Fabrique||{}),!function(t){(n=e=t.IntegrationEvents||(t.IntegrationEvents={})).SPLASH_CREATED="splashCreated",n.SPLASH_LOAD_COMPLETE="splashLoadComplete",n.SPLASH_REMOVED="splashRemoved",n.GAME_LOAD_COMPLETE="gameLoadComplete",i.prototype.getEventNames=function(){return this.eventsToCreate},i.prototype.register=function(){var e=this;this.eventsToCreate.map(function(t){e.events.push(new Event(t))})},i.prototype.dispatch=function(e){var t=this.events.filter(function(t){return t.type===e});t&&0<t.length&&document.dispatchEvent(t[0])},i.prototype.clear=function(){this.events=[]};var e,n=i;function i(){this.eventsToCreate=[e.SPLASH_CREATED,e.SPLASH_LOAD_COMPLETE,e.SPLASH_REMOVED,e.GAME_LOAD_COMPLETE],this.events=[]}t.IntegrationEventHandler=n}(AzerionIntegration=AzerionIntegration||{}),!function(t){function e(){}e.show=function(){var t=document.getElementById("loader");t&&(t.style.display="block")},e.hide=function(){var t=document.getElementById("loader");t&&(t.style.display="none")},t.LoaderHelper=e}(Fabrique=Fabrique||{}),!function(t){function e(t){this.game=t,this.focused=!0}e.getInstance=function(t){return e.instance=e.instance?e.instance:new e(t)},e.prototype.init=function(){var t=this;h5branding.Utils.isOnDevice()&&this.game.device.iOS?this.game.stage.disableVisibilityChange=!1:this.game.stage.disableVisibilityChange=!0,this.onPauseCallback=new Phaser.Signal,h5branding.Utils.isOnDevice()&&(this.game.device.iOS?(window.addEventListener("blur",function(){return t.onBlur()}),window.addEventListener("focus",function(){return t.onFocus()})):(document.addEventListener("pause",function(){return t.onPause()}),document.addEventListener("resume",function(){return t.onResume()}))),this.game.onBlur.add(this.onBlur,this),this.game.onFocus.add(this.onFocus,this),this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},e.prototype.onBlur=function(){this.focused=!1,this.game.onPause.dispatch()},e.prototype.onFocus=function(){this.focused=!0,t.AdHandler.getInstance().isAdPlaying()||this.game.onResume.dispatch()},e.prototype.onPause=function(){this.game.sound.setMute(),this.onPauseCallback&&this.onPauseCallback.dispatch()},e.prototype.onResume=function(){this.game.sound.unsetMute()},e.prototype.pause=function(){this.game.onPause.dispatch()},e.prototype.resume=function(){this.hasFocus&&this.game.onResume.dispatch()},Object.defineProperty(e.prototype,"hasFocus",{get:function(){return this.focused},enumerable:!1,configurable:!0}),t.PauseHandler=e}(Fabrique=Fabrique||{}),!function(t){e=Phaser.State,__extends(i,e),i.prototype.create=function(){},i.Name="default";var e,n=i;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=i.Name,t}t.State=n}(Fabrique=Fabrique||{}),(BubbleShooter||(BubbleShooter={})).Point=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e},!function(t){function n(t,e){this.id=++n.ID,this.x=0,this.y=0,this.type=0,this.removed=!1,this.offsetX=0,this.offsetY=0,this.v=0,this.alpha=1,this.processed=!1,this._animationSpeed=5,this.animationTime=1,this.view=null,this.x=t,this.y=e}Object.defineProperty(n.prototype,"hasBubble",{get:function(){return 0<=this.type},enumerable:!1,configurable:!0}),n.prototype.update=function(t){},n.prototype.kill=function(){this.type=-1},Object.defineProperty(n.prototype,"animationSpeed",{get:function(){return this._animationSpeed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAlive",{get:function(){return-1!=this.type},enumerable:!1,configurable:!0}),n.ID=0,t.Tile=n}(BubbleShooter=BubbleShooter||{}),!function(i){function t(){this.startMissLeft=5,this.maxMiss=this.startMissLeft,this.missLeft=this.startMissLeft,this.defaultColor=10535167,this.numColors=6,this.x=4,this.y=83,this.width=0,this.height=0,this.cols=16,this.rows=16,this.rowsFill=9,this.tileWidth=73,this.tileHeight=73,this.tileRealSize=67,this.rowHeight=.95*this.tileHeight,this.rowOffset=0,this.collisionRadius=.6*this.tileHeight}t.prototype.forEach=function(t){for(var e=this.cols-1;0<=e;e--)for(var n=this.rows-1;0<=n;n--)t(this.tiles[e][n])},t.prototype.setTileType=function(t,e,n){this.tiles[t][e].type=n},t.prototype.getTilePosition2=function(t){return this.getTilePosition(t.x,t.y)},t.prototype.getTilePosition=function(t,e){t=this.x+t*this.tileWidth,(e+this.rowOffset)%2&&(t+=this.tileWidth/2),e=this.y+e*this.rowHeight;return new i.Point(t,e)},t.prototype.getTilePositionByView=function(t){return t.view.position},t.prototype.getGridPosition=function(t,e){var e=Math.floor((e-this.y)/this.rowHeight),n=0,t=((e+this.rowOffset)%2&&(n=this.tileWidth/2),Math.floor((t-n-this.x)/this.tileWidth));return new i.Point(t,e)},i.LevelData=t}(BubbleShooter=BubbleShooter||{}),(BubbleShooter||(BubbleShooter={})).Bubble=function(){this.x=0,this.y=0,this.angle=0,this.type=0,this.view=null,this.alpha=1},!function(t){t.Gun=function(){this.x=0,this.y=0,this.angle=0,this.type=0,this.speed=1800,this.bubble=new t.Bubble}}(BubbleShooter=BubbleShooter||{}),!function(r){function t(t,e){this.readyShoot=!0,this.stateChangedCallback=null,this.score=0,this.lastTile=null,this.mathNeighborsoffsets=[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],this.snapNeighborsoffsets=[[[-1,1],[0,1],[-1,0],[1,0]],[[0,1],[1,1],[1,0],[-1,0]]],this._level=t,this._gun=e}t.prototype.addScore=function(t){this.score+=t},t.prototype.playSound=function(t){this._bubbleShooterGame.playSound(t)},t.prototype.setState=function(t){var e=this._gameState;this._gameState=t,null!=this.stateChangedCallback&&this.stateChangedCallback(e,t)},t.prototype.killTile=function(t){t.kill(),this.onTileKilled(t)},t.prototype.onTileKilled=function(t){},t.prototype.checkExisting=function(t){for(var e=this.findColors(),n=!1,i=0;i<e.length;i++)n=e[i]==t;return n},t.prototype.nextBubble=function(){this._gun.type=this._gun.nextBubble.type,this._gun.bubble.type=this._gun.type,this._gun.nextBubble.type=this.getExistingColor()},t.prototype.getHasAliveTiles=function(){var e=!1;return this._level.forEach(function(t){t.isAlive&&(e=!0)}),e},t.prototype.reset=function(){this._level.missLeft=this._level.startMissLeft,this._level.maxMiss=this._level.startMissLeft,this.score=0,this._grouppedTiles=null,this.lastTile=null},t.prototype.checkGameOver=function(t){for(var e=0;e<this._level.cols;e++)if(-1!=this._level.tiles[e][this._level.rows-1].type)return this.setState(new r.ReadyGameState(this)),this.setState(new r.GameoverGameState(this,t)),!0;return!1},t.prototype.addBubbles=function(){for(var t=0;t<this._level.cols;t++)for(var e=0;e<this._level.rows-1;e++)this._level.tiles[t][this._level.rows-1-e].type=this._level.tiles[t][this._level.rows-1-e-1].type;for(t=0;t<this._level.cols;t++)this._level.tiles[t][0].type=this.getExistingColor()},t.prototype.snapBubble=function(t){var e=this._gun.bubble.x+.5*this._level.tileWidth,n=this._gun.bubble.y+.5*this._level.tileHeight,e=this._level.getGridPosition(e,n),n=(e.x<0&&(e.x=0),e.x>=this._level.cols&&(e.x=this._level.cols-1),e.y<0&&(e.y=0),e.y>=this._level.rows&&(e.y=this._level.rows-1),this._level.tiles[e.x][e.y]);n.hasBubble&&(n=this.getNearestEmptyTile(this._gun.bubble.view,n),e.x=n.x,e.y=n.y),n.type=this._gun.bubble.type,this._gun.bubble.type=-1,this._gun.bubble.alpha=0,this.checkGameOver(t)||(this._grouppedTiles=this.findGroup(e.x,e.y,!0,!0,!1),3<=this._grouppedTiles.length?(this.setState(new r.ResolveGameState(this)),this._gun.bubble.x=this._gun.x,this._gun.bubble.y=this._gun.y,this.onBubblesKilled(this._grouppedTiles)):(this.lastTile=n,this.updateMiss(),this.setState(new r.SnapGameState(this))))},t.prototype.updateMiss=function(){this._level.missLeft--,this._level.missLeft<0&&this._level.maxMiss--,this._level.maxMiss<0&&(this._level.maxMiss=this._level.startMissLeft)},t.prototype.getRandomExistingTile=function(){return this.shuffle(this.getExistingTile())},t.prototype.getExistingTile=function(){var e=[];return this._level.forEach(function(t){t.isAlive&&e.push(t)}),e},t.prototype.getEmptyTile=function(){var e=[];return this._level.forEach(function(t){t.hasBubble||e.push(t)}),e},t.prototype.getNearestEmptyTile=function(t,e){for(var n,i=null,s=this.getNeighbors(this.snapNeighborsoffsets,e),o=Number.MAX_VALUE,a=(this._level.getTilePosition2(e),0);a<s.length;a++)s[a].hasBubble||(n=this._level.getTilePosition2(s[a]),(n=r.MathEx.getDistance(t.x,t.y,n.x,n.y))<o&&(i=s[a],o=n));return null==i&&(e=this._level.tiles[e.x][e.y+1]||this._level.tiles[e.x+1][e.y]||this._level.tiles[e.x-1][e.y],i=this.getNearestEmptyTile(t,e)),i},t.prototype.shuffle=function(t){for(var e,n,i=t.length;0!==i;)n=Math.floor(Math.random()*i),e=t[--i],t[i]=t[n],t[n]=e;return t},t.prototype.findColors=function(){for(var e=[],n=[],t=0;t<this._level.numColors-1;t++)n.push(!1);return this._level.forEach(function(t){t.isAlive&&!n[t.type]&&(n[t.type]=!0,e.push(t.type))}),e},t.prototype.getExistingColor=function(){var t=this.findColors(),e=0;return e=0<t.length?t[r.MathEx.random(0,t.length-1)]:e},t.prototype.getNeighbors=function(t,e){for(var n=[],i=t[(e.y+this._level.rowOffset)%2],s=0;s<i.length;s++){var o=e.x+i[s][0],a=e.y+i[s][1];0<=o&&o<this._level.cols&&0<=a&&a<this._level.rows&&n.push(this._level.tiles[o][a])}return n},t.prototype.onBubblesKilled=function(t){this.addScore(t.length)},t.prototype.onFloatingRemoved=function(t){this.addScore(t.length)},t.prototype.resetProcessed=function(){this._level.forEach(function(t){return t.processed=!1})},t.prototype.findGroup=function(t,e,n,i,s){i&&this.resetProcessed();for(var o=this._level.tiles[t][e],a=(o.processed=!0,[]),r=(a.push(o),[]);0<a.length;){var l=a.pop();if(-1!=l.type&&!(s&&l.removed||n&&l.type!=o.type)){r.push(l);for(var h=this.getNeighbors(this.mathNeighborsoffsets,l),u=0;u<h.length;u++)h[u].processed||(a.push(h[u]),h[u].processed=!0)}}return r},t.prototype.findFloatingClusters=function(){this._level.forEach(function(t){return t.processed=!1});for(var t=[],e=0;e<this._level.cols;e++)for(var n=0;n<this._level.rows;n++)if(!this._level.tiles[e][n].processed){var i=this.findGroup(e,n,!1,!1,!0);if(!(i.length<=0)){for(var s=!0,o=0;o<i.length;o++)if(0==i[o].y){s=!1;break}s&&t.push(i)}}return t},t.prototype.update=function(t,e){this._gameState.update(t,e)},t.prototype.onStateUpdate=function(t,e){},Object.defineProperty(t.prototype,"grouppedTiles",{get:function(){return this._grouppedTiles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gun",{get:function(){return this._gun},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameState",{get:function(){return this._gameState},enumerable:!1,configurable:!0}),r.BubbleEngine=t}(BubbleShooter=BubbleShooter||{}),!function(t){function e(t,e){this._animationState=0,this._animationTime=0,this._animationTimeTotal=0,this._animationComplete=!1,this._engine=t}e.prototype.update=function(t,e){this._animationTime>=this._animationTimeTotal?this.onAnimationComplete(e):this._animationTime+=t},e.prototype.onAnimationComplete=function(t){this._animationComplete=!0},Object.defineProperty(e.prototype,"animationTime",{get:function(){return this._animationTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationTimeTotal",{get:function(){return this._animationTimeTotal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationComplete",{get:function(){return this._animationComplete},enumerable:!1,configurable:!0}),t.GameStateBase=e}(BubbleShooter=BubbleShooter||{}),!function(e){n=e.GameStateBase,__extends(i,n),i.prototype.update=function(t){n.prototype.update.call(this,t),this._engine.onStateUpdate(this,t)},i.prototype.onAnimationComplete=function(t){this._engine.lastTile.view.scale.set(Constants.SF),this._engine.setState(new e.AddBubbleRowGameState(this._engine))};var n,t=i;function i(t){t=n.call(this,t)||this;return t._animationTimeTotal=.17,t._engine.readyShoot=!1,t}e.SnapGameState=t}(BubbleShooter=BubbleShooter||{}),!function(i){n=i.BubbleEngine,__extends(e,n),e.prototype.onBubblesKilled=function(t){this.addScore(30+20*(t.length-3))},e.prototype.onFloatingRemoved=function(t){var e=3<t.length?100:200;this.addScore(t.length*e)},e.prototype.onTileKilled=function(t){var e=Sounds.SoundOndMath[i.MathEx.random(0,Sounds.SoundOndMath.length-1)];this.playSound(e)},e.prototype.destroyAllBubblesLoop=function(t,e,n){var i;t.aliveTile.length&&(0<=(i=t.aliveTile[n?0:t.aliveTile.length-1]).animationTime&&(i.animationTime-=i.animationSpeed*e),i.animationTime<=0&&i.isAlive&&(this.killTile(i),n?t.aliveTile.shift():t.aliveTile.pop()))},e.prototype.onStateUpdate=function(t,e){var n;t instanceof i.SnapGameState?(this.lastTile.view,t.animationTime<t.animationTimeTotal/2?this.lastTile.view.scale.set(this.lastTile.view.scale.x-.028):this.lastTile.view.scale.set(this.lastTile.view.scale.x+.028)):t instanceof i.ReadyGameState?t.animationComplete?this.gun.bubble.view.scale.x!=Constants.SF&&(this.gun.nextBubble.view.scale.set(Constants.SF),this.gun.bubble.view.scale.set(Constants.SF)):(n=1/t.animationTimeTotal*t.animationTime,this.gun.bubble.view.scale.set(n*Constants.SF),this.gun.nextBubble.view.scale.set(n*Constants.SF)):t instanceof i.GameoverGameState&&(this.destroyAllBubblesLoop(t,e,!0),this.destroyAllBubblesLoop(t,e,!1))};var n,t=e;function e(t,e){t=n.call(this,t,e)||this;return t.targetGunScale=null,t.targetNextBScale=null,t}i.BubbleHitEngine=t}(BubbleShooter=BubbleShooter||{}),!function(t){function e(){}e.random=function(t,e){return Math.floor(t+Math.random()*(e-t+1))},e.getDistance=function(t,e,n,i){t-=n,n=e-i;return Math.sqrt(t*t+n*n)},e.clamp=function(t,e,n){return Math.max(t,Math.min(e,n))},e.map=function(t,e,n,i,s,o,a,r){return a&&t<e?i:r&&n<t?s:(a=(t-e)/(n-e)*(s-i)+i,o?Math.round(a):a)},e.lerp=function(t,e,n){return t+(e-t)*n},e.deg2rad=3.14159265/180,e.rad2deg=180/3.14159265,t.MathEx=e}(BubbleShooter=BubbleShooter||{}),!function(t){e=t.GameStateBase,__extends(i,e);var e,n=i;function i(t){return e.call(this,t)||this}t.InitGameState=n}(BubbleShooter=BubbleShooter||{}),!function(t){i=t.GameStateBase,__extends(n,i),n.prototype.update=function(t){this._engine.onStateUpdate(this,t),i.prototype.update.call(this,t)};var i,e=n;function n(t,e){var n=i.call(this,t)||this;return n.aliveTile=t.getRandomExistingTile(),BubbleHit.GameStats.updateStats(e,BubbleHit.GameStats.LOSSES,1),n}t.GameoverGameState=e}(BubbleShooter=BubbleShooter||{}),!function(t){s=t.GameStateBase,__extends(n,s),n.prototype.update=function(t){s.prototype.update.call(this,t),this._engine.onStateUpdate(this,t)},n.prototype.onAnimationComplete=function(){s.prototype.onAnimationComplete.call(this),this._engine.readyShoot=!0};var s,e=n;function n(t){var e=s.call(this,t)||this,n=(e._animationTimeTotal=.216,t.level.forEach(function(t){t.animationTime=1}),e._engine.gun),i=n.bubble;return i.x=n.x,i.y=n.y,i.angle=n.angle,i.alpha=1,t.nextBubble(),e}t.ReadyGameState=e}(BubbleShooter=BubbleShooter||{}),!function(a){n=a.GameStateBase,__extends(e,n),e.prototype.update=function(t,e){this._engine.onStateUpdate(this,t),n.prototype.update.call(this,t),0==this._animState?this.updateResolveFloating(t):this.updatePopBubbles(t,e)},e.prototype.updateResolveFloating=function(t){this._engine.level.forEach(function(t){return t.removed=!1}),this._engine.grouppedTiles.forEach(function(t){t.removed=!0,t.animationTime=1}),this._floatingClusters=this._engine.findFloatingClusters(),this._engine.onFloatingRemoved(this._floatingClusters),this._animState=1},e.prototype.updatePopBubbles=function(t,e){for(var n=!1,i=0;i<this._engine.grouppedTiles.length;i++)if(0<=(s=this._engine.grouppedTiles[i]).type)return n=!0,s.animationTime-=1/s.animationSpeed,void(s.animationTime<=0&&this._engine.killTile(s));for(i=0;i<this._floatingClusters.length;i++)for(var s,o=0;o<this._floatingClusters[i].length;o++)if(0<=(s=this._floatingClusters[i][o]).type)return n=!0,s.animationTime-=1/s.animationSpeed,void(s.animationTime<=0&&this._engine.killTile(s));n||(this._engine.getHasAliveTiles()?this._engine.setState(new a.ReadyGameState(this._engine)):this._engine.setState(new a.WinGameState(this._engine,e)))};var n,t=e;function e(t){t=n.call(this,t)||this;return t._animState=0,t._animTime=0,t._engine.readyShoot=!1,t}a.ResolveGameState=t}(BubbleShooter=BubbleShooter||{}),!function(s){o=s.GameStateBase,__extends(e,o),e.prototype.update=function(t,e){if(this._engine.onStateUpdate(this,t),o.prototype.update.call(this,t),this.bubble.x+=this.gun.speed*Math.cos(this.bubble.angle)*t,this.bubble.y+=this.gun.speed*Math.sin(this.bubble.angle)*t,this.bubble.x<=this.level.x?(this.bubble.angle=Math.PI-this.bubble.angle,this.bubble.x=this.level.x):this.bubble.x+this.level.tileWidth>=this.level.x+this.level.width&&(this.bubble.angle=Math.PI-this.bubble.angle,this.bubble.x=this.level.x+this.level.width-this.level.tileWidth),this.bubble.y<=this.level.y)this.bubble.y=this.level.y,this._engine.snapBubble(e);else for(var n=0;n<this.existingTile.length;n++){var i=this.level.getTilePosition2(this.existingTile[n]);if(s.MathEx.getDistance(this.bubble.x+.5*this.level.tileWidth,this.bubble.y+.5*this.level.tileHeight-.5*this.level.collisionRadius,i.x+.5*this.level.tileWidth,i.y+.5*this.level.tileHeight)<this.level.collisionRadius)return void this._engine.snapBubble(e)}};var o,t=e;function e(t){t=o.call(this,t)||this;return t.gun=t._engine.gun,t.bubble=t.gun.bubble,t.level=t._engine.level,t.existingTile=t._engine.getExistingTile(),t._engine._bubbleShooterGame.playSound(Sounds.shoot),t}s.ShootingGameState=t}(BubbleShooter=BubbleShooter||{}),!function(o){function t(){this._turnCount=0,this._rowOffset=0,this._sounds=[],this.blockInput=!1}Object.defineProperty(t.prototype,"score",{get:function(){return this._engine.score},enumerable:!1,configurable:!0}),t.prototype.getBubbleEngine=function(){var t=new o.BubbleEngine(this._level,this._gun);return this.initListeners(t),t},t.prototype.initListeners=function(t){var n=this;t.stateChangedCallback=function(t,e){n.stateChangedCallback&&n.stateChangedCallback(t,e)}},t.prototype.updateScale=function(){},t.prototype.init=function(t){this.initLevel(t),this.initPlayer(),this._engine=this.getBubbleEngine(),this._engine.setState(new o.InitGameState(this._engine)),this._engine._bubbleShooterGame=this},t.prototype.playSound=function(t){},t.prototype.initLevel=function(t){this._level=t,this._level.tiles=[];for(var e=0;e<this._level.cols;e++){this._level.tiles[e]=[];for(var n=0;n<this._level.rows;n++){var i=this.getNewTile(e,n);this._level.tiles[e][n]=i}}this._level.width=this._level.cols*this._level.tileWidth+.5*this._level.tileWidth,this._level.height=(this._level.rows-1)*this._level.rowHeight+.5*this._level.tileHeight},t.prototype.getNewTile=function(t,e){t=new o.Tile(t,e);return t.view=this.getTileView(t),t},t.prototype.getTileView=function(t){return null},t.prototype.initPlayer=function(){this._gun=new o.Gun,this._gun.x=this._level.x+.5*this._level.width,this._gun.y=this._level.y+this._level.height+60,this._gun.angle=90,this._gun.type=0,this._gun.view=this.getGunView(),this._gun.bubble.view=this.getGunBubbleView(),this._gun.nextBubble=new o.Bubble,this._gun.nextBubble.view=this.getNextBubbleView(),this._level.missIndicator=this.getMissIndicatorView()},t.prototype.getMissIndicatorView=function(){},t.prototype.updateMissIndicator=function(t){},t.prototype.getGunView=function(){return null},t.prototype.getGunBubbleView=function(){return null},t.prototype.getNextBubbleView=function(){return null},t.prototype.newGame=function(){this._engine.reset(),this._turnCount=0,this._rowOffset=0,this._cookLevel(),this._engine.setState(new o.ReadyGameState(this._engine)),this._engine.nextBubble(),this._engine.nextBubble()},t.prototype._cookEasyLevel=function(){for(var t=0;t<this._level.rows;t++)for(var e,n=o.MathEx.random(0,this._level.numColors-1),i=0,s=0;s<this._level.cols;s++)2<=i&&(n=e=(e=o.MathEx.random(0,this._level.numColors-1))==n?(e+1)%this._level.numColors:e,i=0),i++,this._level.setTileType(s,t,t<this._level.rowsFill?n:-1)},t.prototype._cookLevel=function(){for(var t=0;t<this._level.rows;t++)for(var e=0;e<this._level.cols;e++){var n=o.MathEx.random(0,this._level.numColors-1);this._level.setTileType(e,t,t<this._level.rowsFill?n:-1)}},t.prototype.update=function(t,e){this.updateGun(),this.updateGunBubble(t),this.updateNextBubble(),this.updateMissIndicator(this._level.missLeft),this._engine.update(t,e);for(var n=0;n<this._level.rows;n++)for(var i=0;i<this._level.cols;i++){var s=this._level.tiles[i][n];this.updateTile(s,t)}this.postUpdateGunBubble(t)},t.prototype.updateTile=function(t,e){},t.prototype.updateGun=function(){},t.prototype.updateGunBubble=function(t){},t.prototype.postUpdateGunBubble=function(t){},t.prototype.updateNextBubble=function(){},t.prototype.shoot=function(){var t;this._engine.readyShoot&&((t=this._gun.bubble).x=this._gun.x,t.y=this._gun.y,t.angle=this._gun.angle,t.type=this._gun.type,this._engine.setState(new o.ShootingGameState(this._engine)))},t.prototype.onPointerDown=function(){},t.prototype.onPointerUp=function(){},Object.defineProperty(t.prototype,"gun",{get:function(){return this._gun},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),t.prototype.getAliveTilesCount=function(){var e=0;return this._level.forEach(function(t){t.isAlive&&e++}),e},o.BubbleShooterGame=t}(BubbleShooter=BubbleShooter||{}),!function(e){i=e.BubbleShooterGame,__extends(n,i),n.prototype.getSounds=function(){for(var t=0;t<Sounds.preloadList.length;t++){var e=this._game.add.audio(Sounds.preloadList[t]);e.name=Sounds.preloadList[t],this._sounds.push(e)}},n.prototype.playSound=function(t){for(var e=0;e<this._sounds.length;e++)if(this._sounds[e].name==t)return void this._sounds[e].play()},n.prototype.onPointerDown=function(){Constants.HAS_OPEN_WINDOWS||this.blockInput||this._engine.gameState instanceof e.ReadyGameState&&this._game.device.desktop&&this.shoot()},n.prototype.onPointerUp=function(){Constants.HAS_OPEN_WINDOWS||this.blockInput||this._engine.gameState instanceof e.ReadyGameState&&!this._game.device.desktop&&(this.updateGun(),this.shoot())},n.prototype.getMissIndicatorView=function(){this._level.missIndicator=Constants.sprite(this._level.x+50,this._gun.y,"atlas0","fip.png"),this._level.missIndicator.anchor.setTo(.5,.5);var t=Constants.sprite(this._level.missIndicator.x,this._level.missIndicator.y,"atlas0","emptyBall.png");t.anchor.setTo(.5,.5),this._level.missIndicatorText=this._game.make.text(this._level.missIndicator.x,this._level.missIndicator.y,"_",{font:"700 50px Arial",fill:"#676767",align:"center"}),this._level.missIndicatorText.anchor.setTo(.5,.45),this.updateMissIndicator(this._level.missLeft),this._view.add(this._level.missIndicator),this._view.add(t),this._view.add(this._level.missIndicatorText)},n.prototype.updateMissIndicator=function(t){t.toString==this._level.missIndicatorText.text||t<0||this._level.missIndicatorText.setText(t)},n.prototype.getTileView=function(t){var e=Constants.sprite(0,0,"atlas0","Blue1.png");return e.anchor.set(.5),this._view.add(e),e},n.prototype.getGunView=function(){var t=Constants.sprite(this._gun.x,this._gun.y,"atlas0","arrow.png"),e=(t.anchor.setTo(0,.5),Constants.sprite(t.x,t.y,"atlas0","emptyBall.png"));return e.anchor.setTo(.5,.5),this._view.add(t),this._view.add(e),t},n.prototype.getNextBubbleView=function(){var t=Constants.sprite(this._level.x+150,this._gun.y,"atlas0","Blue1.png"),e=(t.anchor.set(.5),Constants.sprite(t.x,t.y,"atlas0","emptyBall.png"));return e.anchor.setTo(.5,.5),this._view.add(e),this._view.add(t),t},n.prototype.updateNextBubble=function(){this._gun&&this._gun.nextBubble.view.frameName!=this._images[5*this._gun.nextBubble.type]&&(this._gun.nextBubble.view.frameName=this._images[5*this._gun.nextBubble.type])},n.prototype.getGunBubbleView=function(){var t=Constants.sprite(0,0,"atlas0","Blue1.png");return t.anchor.set(.5),this._view.add(t),t},n.prototype.updateTile=function(t,e){i.prototype.updateTile.call(this,t,e);var n,e=this._level.getTilePosition2(t);t.hasBubble?(n=this._images[5*t.type],1<=t.animationTime?n!=t.view.frameName&&(t.view.frameName=n):(n=Math.abs(Math.floor(5*t.animationTime)-4)+5*t.type,t.view.frameName=this._images[n]),t.view.x=e.x+t.offsetX,t.view.y=e.y+t.offsetY,t.view.alpha=t.alpha,t.view.visible=!0):t.view.visible=!1},n.prototype.angleToPointer=function(t){var e=this._game.input.activePointer,n=e.worldX-t.world.x,e=e.worldY-t.world.y;return Math.atan2(e,n)},n.prototype.updateGun=function(){var t;this._gun&&(t=e.MathEx.clamp(-3,-.17,this.angleToPointer(this._gun.view)),this._gun.angle=t,this._gun.view.x=this._gun.x,this._gun.view.y=this._gun.y,this._gun.view.rotation=this._gun.angle)},n.prototype.updateGunBubble=function(t){var e;this._gun&&(-1!=this._gun.bubble.type?((e=this._images[5*this._gun.bubble.type])!=this._gun.bubble.view.frameName&&(this._gun.bubble.view.frameName=e),this._gun.bubble.view.x=this._gun.bubble.x,this._gun.bubble.view.y=this._gun.bubble.y,this._gun.bubble.view.rotation=0,this._gun.bubble.view.visible=!0):(this._gun.bubble.view.visible=!1,this._gun.bubble.view.y=9999),this._gun.bubble.view.alpha=this._gun.bubble.alpha)},n.prototype.postUpdateGunBubble=function(t){this._gun.bubble.view.visible=-1!=this._gun.bubble.type};var i,t=n;function n(t,e){var n=i.call(this)||this;return n._game=t,n._game.physics.startSystem(Phaser.Physics.ARCADE),n._game.input.onDown.add(n.onPointerDown,n),n._game.input.onUp.add(n.onPointerUp,n),n._view=e,n._images=["Blue1.png","Blue2.png","Blue3.png","Blue4.png","Blue5.png","Orange1.png","Orange2.png","Orange3.png","Orange4.png","Orange5.png","Pink1.png","Pink2.png","Pink3.png","Pink4.png","Pink5.png","Violet1.png","Violet2.png","Violet3.png","Violet4.png","Violet5.png","Red1.png","Red2.png","Red3.png","Red4.png","Red5.png","Gren1.png","Gren2.png","Gren3.png","Gren4.png","Gren5.png"],n.getSounds(),n}e.BubbleShooterGamePhaser=t}(BubbleShooter=BubbleShooter||{}),!function(e){n=e.BubbleShooterGamePhaser,__extends(i,n),i.prototype.getBubbleEngine=function(){var t=new e.BubbleHitEngine(this._level,this._gun);return this.initListeners(t),t};var n,t=i;function i(t,e){e=n.call(this,t,e)||this;return e.game=t,e}e.BubbleHitGame=t}(BubbleShooter=BubbleShooter||{}),!function(e){n=e.GameStateBase,__extends(i,n),i.prototype.onAnimationComplete=function(t){this._engine.level.missLeft<0?(this._engine.addBubbles(),this._engine.level.missLeft=this._engine.level.maxMiss,this._engine.setState(new e.FlyFixGameState(this._engine)),this._engine.checkGameOver(t)):this._engine.setState(new e.ReadyGameState(this._engine))};var n,t=i;function i(t){t=n.call(this,t)||this;return t._animationTimeTotal=.01,t}e.AddBubbleRowGameState=t}(BubbleShooter=BubbleShooter||{}),!function(a){n=a.GameStateBase,__extends(e,n),e.prototype.update=function(t,e){this._engine.onStateUpdate(this,t),n.prototype.update.call(this,t),this.updatePopBubbles(t,e)},e.prototype.updatePopBubbles=function(t,e){for(var n=!1,i=0;i<this._floatingClusters.length;i++)for(var s=0;s<this._floatingClusters[i].length;s++){var o=this._floatingClusters[i][s];if(0<=o.type)return n=!0,o.animationTime-=1/o.animationSpeed,void(o.animationTime<=0&&this._engine.killTile(o))}n||(this._engine.getHasAliveTiles()?this._engine.setState(new a.ReadyGameState(this._engine)):this._engine.setState(new a.WinGameState(this._engine,e)))};var n,t=e;function e(t){t=n.call(this,t)||this;return t._animTime=0,t._floatingClusters=t._engine.findFloatingClusters(),t._engine.readyShoot=!1,t}a.FlyFixGameState=t}(BubbleShooter=BubbleShooter||{}),!function(t){n=t.GameStateBase,__extends(i,n);var n,e=i;function i(t,e){t=n.call(this,t)||this;return BubbleHit.GameStats.updateStats(e,BubbleHit.GameStats.WINS,1),t}t.WinGameState=e}(BubbleShooter=BubbleShooter||{}),function(){function t(){}return t.preloadList=[t.atlas0="atlas0",t.atlas1="atlas1"],t}()),Constants=function(){function h(){}return h.updateScaleValue=function(t){this.DPI=1,this.WW=t.width,this.WH=t.height,this.WCX=this.WW/2,this.WCY=this.WH/2,this.ASPECT=h.WW/h.WH,this.IS_PORTRAIT=1.1*h.WW<h.WH,this.IS_LANDSCAPE=!this.IS_PORTRAIT,this.MIN_MODE=this.WW<=640&&this.WH<=480&&this.IS_LANDSCAPE&&600<=this.WW&&400<=this.WH,this.S=Math.min(this.WW/this.GAME_WIDTH,this.WH/this.GAME_HEIGHT),this.S=parseFloat(this.S.toFixed(2)),this.PM=1.4},Object.defineProperty(h,"SF",{get:function(){return h._SF},enumerable:!1,configurable:!0}),h.init=function(t){h._game=t},h.sprite=function(t,e,n,i){t=h._game.make.sprite(t,e,n,i);return t.scale.set(h.SF),t},h.text=function(t,e,n,i){t=h._game.make.text(t,e,n,i);return t.scale.set(h.SF),t},h.button=function(t,e,n,i,s,o,a,r,l){t=h._game.make.button(t,e,n,null,null,o,a,r,l);return t.scale.set(h.SF),t.events.onInputDown.add(function(){i()},s),t},h.GAME_WIDTH=1920,h.GAME_HEIGHT=1280,h.START_RGBCOLOR=[160,192,255],h.GAME_KEY="07fa9df6d96c1024d9c0aafb70c1994e",h.SECRET_KEY="a1a25eec80bbcad12b6df82d6f5194f224b5730f",h.BUILD="1.0.0",h.GOOGLE_ID="UA-72005341-38",h.GOOGLE_APP_NAME="Bubble Hit",h.GAMEDISTRIBUTION_ID="502af82350a44582b6e51d467285a8c0",h.SPLASH_BACKGROUND=11119017,h.SPLASH_IMAGE="OG_logo_fullcolor",h.SPLASH_URL="http://www.funnygames.nl",h.MORE_GAMES_URL="http://www.funnygames.nl",h.GAME_TITLE="Bubble Hit",h.WW=window.innerWidth,h.WH=window.innerHeight,h.IS_LANDSCAPE=!(h.IS_PORTRAIT=1.1*h.WW<h.WH),h.WCX=h.WW/2,h.WCY=h.WH/2,h.PM=1,h.ASPECT=0,h.S=1,h._SF=h.WW<1024?2:1,h.MIN_MODE=!1,h.DPI=window.devicePixelRatio,h.HAS_OPEN_WINDOWS=!1,h._game=null,h}(),Images=function(){function t(){}return t.gameBorder="border",t.btnS=["button_n.png","button_s.png","button_h.png","button_s.png"],t.btnRef=["btn_Funny_games_n.png","btn_Funny_games.png","btn_Funny_games.png","btn_Funny_games.png"],t.btnAudioON=["mute_on_n.png","mute_on.png","mute_on.h.png","mute_on_n.png"],t.btnAudioOFF=["mute_off_n.png","mute_off.png","mute_off_h.png","mute_off_n.png"],t.preloadList=[t.gameBorder],t}(),Sounds=function(){function t(){}return t.shoot="shoot",t.drop_1="drop_1",t.drop_2="drop_2",t.drop_3="drop_3",t.drop_4="drop_4",t.drop_5="drop_5",t.menu_press="menu_press",t.menu_touch="menu_touch",t.SoundOndMath=[t.drop_1,t.drop_2,t.drop_3,t.drop_4,t.drop_5],t.preloadList=[t.shoot,t.drop_1,t.drop_2,t.drop_3,t.drop_4,t.drop_5,t.menu_press,t.menu_touch],t}(),AlignText=function(){function t(t){this.text=t,this.initPosition=t.x,this.text.stroke="#19507D",this.text.strokeThickness=10}return t.prototype.align=function(){this.text.x=this.initPosition-this.text.width},t.prototype.setText=function(t){this.text.setText(t),this.align()},t}();function LP(t,e){return Constants.IS_LANDSCAPE?t:e}!function(t){function s(){}s.loadStats=function(t){t=t.storage.getItem("statistic");if(null===t)return null;try{return s.STATISTICS=JSON.parse(t)}catch(t){return null}},s.updateStats=function(t,e,n){s.loadStats(t);var i=s.STATISTICS[e];s.STATISTICS[e]=i+=n,s.saveStats(t)},s.saveStats=function(t){t.storage.setItem("statistic",JSON.stringify(s.STATISTICS))},s.resetStats=function(t){s.STATISTICS=s.DEFAULT_VALUES,s.saveStats(t)},s.DEFAULT_VALUES={losses:0,wins:0},s.WINS="wins",s.LOSSES="losses",t.GameStats=s}(BubbleHit=BubbleHit||{}),function(i){function t(t,e){this.menuList=[],this.L_el=[],this.bubbleShooterGame=e,this.game=t,this.sideBar=this.game.add.group(),this.sideBarP=this.game.add.group(),this.createElements(),this.menuList.push(this._b_Options=new i.Window_Options(this)),this.menuList.push(this.b_HowToPlay=new i.Window_howToPlay(this)),this.menuList.push(this.b_Statistics=new i.Window_statistics(this,this.game)),this.menuList.push(this.b_gameOver=new i.Window_gameOver(this)),this.menuList.push(this.b_win=new i.Window_win(this)),this._b_Options.setMenuToChange(this.menuList);for(var n=0;n<this.menuList.length;n++)this.menuList[n].visible=!1}Object.defineProperty(t.prototype,"b_Options",{get:function(){return this._b_Options},enumerable:!1,configurable:!0}),t.prototype.updateGroup=function(t,e){Constants.MIN_MODE&&!Constants.IS_PORTRAIT?(this.sideBar.x=(e+286)*Constants.S,this.sideBar.y=110*Constants.S):(e=Constants.ASPECT<.8?Constants.S:.8*Constants.S,this.sideBarP.scale.set(e),this.sideBar.x=Constants.WCX+700*Constants.S,this.sideBar.y=130*Constants.S,this.sideBarP.x=Constants.WCX-550*e,this.sideBarP.y=30),this.sideBar.scale.set(Constants.S),this.setOrientation();for(var n=0;n<this.menuList.length;n++)this.menuList[n].updateScale(),this.menuList[n].resizeWindow&&this.menuList[n].resizeWindow()},t.prototype.setOrientation=function(){this.sideBar.visible=!Constants.IS_PORTRAIT,this.sideBarP.visible=Constants.IS_PORTRAIT,this.scoreText=Constants.IS_PORTRAIT?this.scoreTextP:this.scoreTextL,this.btnAudioON=Constants.IS_PORTRAIT?this.btnAudioONp:this.btnAudioONl,this.btnAudioOFF=Constants.IS_PORTRAIT?this.btnAudioOFFp:this.btnAudioOFFl},t.prototype.updateScore=function(t){null!=this.scoreText&&t!=parseInt(this.scoreText.text)&&(this.scoreText.setText(t.toString()),this.b_gameOver.setStatistic(t),this.b_win.setStatistic(t))},t.prototype.nButton=function(t,e,n,i,s,o,a){void 0===a&&(a=1);var r=o||Images.btnS,i=Constants.button(e,n,"atlas0",i,this,r[0],r[1],r[2],r[3]),r=(i.onUpSound=this.game.add.sound(Sounds.menu_touch),i.onOverSound=this.game.add.sound(Sounds.menu_press),new PhaserI18n.TranslatedText(this.game,e,n,s,{font:"800 35px Arial",fill:"#ffffff",align:"center"}));return r.alpha=.9,r.scale.set(a),r.stroke="#19507D",r.strokeThickness=10,this.L_el.push(i),this.L_el.push(r),r.anchor.set(.5),i.anchor.set(.5),t.add(i),o||t.add(r),i},t.prototype.createElements=function(){var t=this,e=this.sideBar.add(Constants.sprite(0,200,"atlas0","Score.png")),n=this.sideBar.add(Constants.sprite(0,40,"atlas0","gameLogo.png")),e=(e.anchor.set(.5),n.anchor.set(.5),this.L_el.push(e),this.L_el.push(n),this.scoreTextL=this.game.make.text(0,230,"",{font:"800 50px Arial",fill:"#ffffff",align:"center"}),this.scoreTextL.stroke="#19507D",this.scoreTextL.strokeThickness=10,this.scoreTextL.anchor.set(.5),this.sideBar.add(this.scoreTextL),this.nButton(this.sideBar,0,470,function(){t.openWindow(0)},"options"),this.nButton(this.sideBar,0,610,function(){AzerionIntegration.SDK.showInterstitialAd(function(){t.closeWindow(),t.bubbleShooterGame.newGame()})},"restart",null,.9),this.nButton(this.sideBar,0,750,function(){t.openWindow(1)},"how_to_play"),this.nButton(this.sideBar,0,885,function(){t.openWindow(2)},"statistics"),(AzerionIntegration.SDK.outGoingLinksAllowed()||AzerionIntegration.SDK.isYandex())&&this.nButton(this.sideBar,0,1045,this.openURL,"more_games"),this.btnAudioONl=this.nButton(this.sideBar,-285,1060,function(){t.muteAudio()},"",Images.btnAudioON),this.btnAudioOFFl=this.nButton(this.sideBar,-285,1060,function(){t.muteAudio()},"",Images.btnAudioOFF),this.btnAudioOFFl.visible=!1,this.sideBarP.visible=!1,this.sideBarP.add(Constants.sprite(20,40,"atlas0","score_p.png"))),n=this.sideBarP.add(Constants.sprite(300,40,"atlas0","gameLogo.png"));this.scoreTextP=this.game.make.text(945,50,"",{font:"800 60px Arial",fill:"#ffffff",align:"center"}),this.scoreTextP.stroke="#19507D",this.scoreTextP.strokeThickness=10,this.scoreTextP.anchor.set(.5),this.sideBarP.add(this.scoreTextP),e.anchor.setTo(0,.5),n.anchor.set(.5),n.scale.set(1.3*Constants.SF),this.nButton(this.sideBarP,-100,250,function(){t.openWindow(0)},"options"),this.nButton(this.sideBarP,250,250,function(){AzerionIntegration.SDK.showInterstitialAd(function(){t.closeWindow(),t.bubbleShooterGame.newGame()})},"restart",null),AzerionIntegration.SDK.outGoingLinksAllowed()&&this.nButton(this.sideBarP,600,250,this.openURL,"more_games"),this.nButton(this.sideBarP,950,250,function(){t.openWindow(2)},"statistics"),this.nButton(this.sideBarP,1300,250,function(){t.openWindow(1)},"how_to_play"),this.btnAudioONp=this.nButton(this.sideBarP,-70,95,function(){t.muteAudio()},"",Images.btnAudioON),this.btnAudioOFFp=this.nButton(this.sideBarP,-70,95,function(){t.muteAudio()},"",Images.btnAudioOFF),this.btnAudioOFFp.visible=!1},t.prototype.muteAudio=function(){var t=this;AzerionIntegration.SDK.showInterstitialAd(function(){t.game.sound.mute=!t.game.sound.mute,t.btnAudioOFF.visible=t.game.sound.mute,t.btnAudioON.visible=!t.game.sound.mute})},t.prototype.openWindow=function(t){this.closeWindow();t=this.menuList[t];t.onShow(this.game),t.visible=!0,Constants.HAS_OPEN_WINDOWS=!0,this.sideBarP.inputEnableChildren=!1,this.sideBar.children.map(function(t){t.input&&(t.input.enabled=!1)})},t.prototype.closeWindow=function(){for(var t=0;t<this.menuList.length;t++)this.menuList[t].visible=!1;Constants.HAS_OPEN_WINDOWS=!1,this.sideBar.children.map(function(t){t.input&&(t.input.enabled=!0)}),this.sideBarP.inputEnableChildren=!0},t.prototype.restartGame=function(t){this.game=t,this.closeWindow(),this.bubbleShooterGame.newGame()},t.prototype.openURL=function(){h5branding.Branding.openCampaignLink(Constants.GAME_TITLE,h5branding.UtmTargets.more_games)},i.MenuController=t}(BubbleHit=BubbleHit||{}),function(t){function e(t,e,n,i,s,o,a){var r=this,o=(this.curValue=0,this.maxValue=1,this.minValue=0,this.myGroup=o,this.myParent=a,(this.minPosition=i)+e/255*((this.maxPosition=s)-i));this.sprite=this.myGroup.add(Constants.sprite(o,n,"atlas0",t)),this.sprite.anchor.set(.5),this.sprite.events.onInputOver.add(this.onPointerOver,this),this.sprite.events.onInputOut.add(this.onPointerOut,this),this.scaledDrag(this.sprite,!1,!0,!1),this.sprite.update=function(){r.beenUpdated||r.setNewValue()}}e.prototype.fromPercentage=function(t,e){return 100*e/(t[1]-t[0])},e.prototype.toPercentage=function(t,e){return this.fromPercentage(t,t[0]<0?e+Math.abs(t[0]):e-t[0])},e.prototype.scaledDrag=function(t,e,n,i){var s=this;return t.inputEnabled=!0,t.input.enableDrag(!1),t.input.allowVerticalDrag=e&&!0,t.input.allowHorizontalDrag=n&&!0,t.input.dragFromCenter=i&&!0,t.events.onDragUpdate.add(function(t,e,n,i){e=t.game.input.getLocalPosition(t.parent,e);t.x=(t.input.allowHorizontalDrag?e:t).x,t.y=(t.input.allowVerticalDrag?e:t).y,s.onDragUpdate()},t),this.setNewValue(),t},e.prototype.onDragUpdate=function(){this.sprite.x=Math.max(this.minPosition,Math.min(this.maxPosition,this.sprite.x)),this.setNewValue()},e.prototype.onPointerOut=function(){this.scaleTween&&this.scaleTween.stop(),this.scaleTweenDown=this.myParent.game.add.tween(this.sprite.scale).to({x:+Constants.SF,y:+Constants.SF},50,"Linear",!0)},e.prototype.onPointerOver=function(){this.scaleTween=this.myParent.game.add.tween(this.sprite.scale).to({x:1.2*Constants.SF,y:1.2*Constants.SF},200,"Linear",!0).loop(!0).yoyo(!0)},e.prototype.setNewValue=function(){this.curValue=this.toPercentage([this.minPosition,this.maxPosition],this.sprite.x)/100,this.myParent.onValueChange(this),this.beenUpdated=!0},t.Slider=e}(BubbleHit=BubbleHit||{}),function(t){o=Phaser.Group,__extends(n,o),n.prototype.updateScale=function(){this.position.setTo(Constants.WCX,Constants.WCY);var t=this.game.device.desktop?1:this.mobileSF;this.scale.set(Constants.S*t)},n.prototype.onShow=function(){},n.prototype.wButton=function(t,e,n,i,s,o,a){var r=a||Images.btnS,i=Constants.button(e,n,"atlas0",i,this,r[0],r[1],r[2],r[3]),r=new PhaserI18n.TranslatedText(this.game,e,n,o,{font:"700 40px Arial",fill:"#ffffff",align:"center"});i.onUpSound=this.game.add.sound(Sounds.menu_touch),i.onOverSound=this.game.add.sound(Sounds.menu_press),i.anchor.setTo(.5,.5),r.anchor.setTo(.5,.5),r.alpha=.9,r.stroke="#19507D",r.strokeThickness=10,t.add(i),a||t.add(r)};var o,e=n;function n(t,e,n,i){var s=o.call(this,t.game)||this,i=(s.mobileSF=1.3,s.mobileSF=i||s.mobileSF,s.controller=t,s.game=s.controller.game,s.position.setTo(Constants.WCX,Constants.WCY),s.bg_img=s.add(Constants.sprite(0,0,"atlas0","menu_bg.png")),s.border_img=s.add(Constants.sprite(0,0,"atlas1","menu_border.png")),s.bg_img.anchor.setTo(.5,.5),s.border_img.anchor.setTo(.5,.5),4*Constants.SF);return s.bg_img.scale.setTo(e*i,n*i),s.border_img.scale.setTo(e*Constants.SF,n*Constants.SF),s.updateScale(),s}t.AppWindow=e}(BubbleHit=BubbleHit||{}),function(t){o=t.AppWindow,__extends(n,o),n.prototype.onShow=function(){this.updateStatistic()},n.prototype.setStatistic=function(t){this.DataScore=t,this.DataBonus=0,this.DataTotalScore=this.DataScore+this.DataBonus},n.prototype.updateStatistic=function(){h5branding.Utils.inIframe()&&Orca.Communication.sendMessage(Orca.Command.highscore,this.DataScore),this.textScore.setText(this.DataScore.toString()),this.textBonus.setText(this.DataBonus.toString()),this.textTotalScore.setText(this.DataTotalScore.toString())};var o,e=n;function n(t){var e=o.call(this,t,1,1)||this,t=new PhaserI18n.TranslatedText(e.game,-150,-300,"losses",{font:"700 60px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),n=new PhaserI18n.TranslatedText(e.game,-400,-150,"score",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),i=new PhaserI18n.TranslatedText(e.game,-400,-50,"bonus",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),s=new PhaserI18n.TranslatedText(e.game,-400,50,"total_score",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10});return e.wButton(e,0,230,function(){AzerionIntegration.SDK.showInterstitialAd(function(){e.controller.restartGame(e.game)})},e.controller,"ok"),e.add(t),e.add(n),e.add(i),e.add(s),e.textScore=new AlignText(e.add(e.game.make.text(400,-150,"_",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),e.textBonus=new AlignText(e.add(e.game.make.text(400,-50,"_",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),e.textTotalScore=new AlignText(e.add(e.game.make.text(400,50,"_",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),e}t.Window_gameOver=e}(BubbleHit=BubbleHit||{}),function(t){i=t.AppWindow,__extends(n,i),n.prototype.resizeWindow=function(){var t,e,n=this.getChildAt(2),i=this.getChildAt(3),i=(!this.game.device.desktop&&window.innerHeight>window.innerWidth?(this.bg_img.height,this.bg_img.x,t=1.8,e=2.2,i.position.y=n.position.y=605):(this.bg_img.height,this.bg_img.x,t=1.5,e=1.3,i.position.y=n.position.y=350),4*Constants.SF),n=(this.bg_img.scale.setTo(t*i,e*i),this.border_img.scale.setTo(t*Constants.SF,e*Constants.SF),this.getFontSettings());this.title.fontSize=n.titleFontSize,this.content.fontSize=n.contentFontSize,this.title.position.y=this.content.position.y-this.content.height/2-this.title.height/2},n.prototype.getFontSettings=function(){var t=60,e=40;return!this.game.device.desktop&&window.innerHeight>window.innerWidth&&(t=80,e=58),{titleFontSize:t,contentFontSize:e}};var i,e=n;function n(t){var e=i.call(this,t,1.5,1.3,1.1)||this,t=e.bg_img.height/2.5+e.bg_img.x,n=e.getFontSettings();return e.title=new PhaserI18n.TranslatedText(e.game,0,-t,"how_to_play",{font:"700 ".concat(n.titleFontSize,"px Arial"),fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),e.content=new PhaserI18n.TranslatedText(e.game,0,-50,"how_to_play_content",{font:"700 ".concat(n.contentFontSize,"px Arial"),fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10,wordWrap:!0,wordWrapWidth:.75*e.width}),e.title.anchor.set(.5),e.content.anchor.set(.5),e.wButton(e,0,350,function(){AzerionIntegration.SDK.showInterstitialAd(function(){e.controller.closeWindow()})},e.controller,"ok"),e.add(e.title),e.add(e.content),e}t.Window_howToPlay=e}(BubbleHit=BubbleHit||{}),function(t){o=t.AppWindow,__extends(n,o),n.prototype.createSliders=function(){this.sliderR=new t.Slider("sliderR.png",Constants.START_RGBCOLOR[0],-25,-410,30,this,this),this.sliderG=new t.Slider("sliderG.png",Constants.START_RGBCOLOR[1],45,-410,30,this,this),this.sliderB=new t.Slider("sliderB.png",Constants.START_RGBCOLOR[2],115,-410,30,this,this),this.sliderA=new t.Slider("sliderA.png",255,265,-280,30,this,this),this.setLastValue(),this.setColorByValue()},n.prototype.onShow=function(){this.setLastValue()},n.prototype.setLastValue=function(){this.lastValue[0]=this.sliderR.sprite.x,this.lastValue[1]=this.sliderG.sprite.x,this.lastValue[2]=this.sliderB.sprite.x},n.prototype.confirmChange=function(){var t=this;AzerionIntegration.SDK.showInterstitialAd(function(){t.controller.closeWindow()})},n.prototype.cancelChange=function(){this.sliderR.sprite.x=this.lastValue[0],this.sliderG.sprite.x=this.lastValue[1],this.sliderB.sprite.x=this.lastValue[2],this.sliderR.setNewValue(),this.sliderG.setNewValue(),this.sliderB.setNewValue(),this.controller.closeWindow()},n.prototype.setMenuToChange=function(t){this.MenuToChange=t},n.prototype.onValueChange=function(t){t===this.sliderA?this.onAudioValueChange():this.setColorByValue()},n.prototype.onAudioValueChange=function(){this.game.sound.volume=this.toRound(this.sliderA.curValue,1)},n.prototype.toRound=function(t,e){t=t.toString().replace(/\,/gi,"."),t=parseFloat(t).toFixed(e);return parseFloat(t)},n.prototype.setColorByValue=function(){var t,e,n;this.sliderR&&this.sliderG&&this.sliderB&&this.sliderA&&(n=255*this.sliderR.curValue,t=255*this.sliderG.curValue,e=255*this.sliderB.curValue,n=this.RGBtoHex(n,t,e),document.body.style.backgroundColor="#"+n.toString(),this.setColor("0x"+n))},n.prototype.RGBtoHex=function(t,e,n){return this.toHex(t)+this.toHex(e)+this.toHex(n)},n.prototype.toHex=function(t){return null==t||0==(t=parseInt(t))||isNaN(t)?"00":(t=Math.max(0,t),t=Math.min(t,255),t=Math.round(t),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))},n.prototype.setColor=function(t){this.game.stage.backgroundColor=this.replaceAt(t,[0,1],["0","x"]);var e=parseInt(t);if(this.MenuToChange&&!(this.MenuToChange.length<0))for(var n=0;n<this.MenuToChange.length;n++)this.MenuToChange[n].bg_img.tint=e},n.prototype.replaceAt=function(t,e,n){for(var i="",s=0;s<e.length;s++)var o=e[s],i=t.substr(0,o)+n[s]+t.substr(o+1);return i};var o,e=n;function n(t){var e=o.call(this,t,1,1)||this,t=(e.lastValue=[],new PhaserI18n.TranslatedText(e.game,-100,-e.height/2+100,"options",{font:"700 60px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10})),n=new PhaserI18n.TranslatedText(e.game,-400,-150,"background_color",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),i=new PhaserI18n.TranslatedText(e.game,-400,250,"sound",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),s=e.game.add.graphics(0,0);s.lineStyle(10,8421504),s.moveTo(-400,-25),s.lineTo(50,-25),s.moveTo(-400,40),s.lineTo(50,40),s.moveTo(-400,110),s.lineTo(50,110),s.moveTo(-200,260),s.lineTo(50,260);return e.wButton(e,248,-55,function(){e.confirmChange()},e,"ok"),e.wButton(e,248,80,function(){AzerionIntegration.SDK.showInterstitialAd(function(){e.cancelChange()})},e,"cancel"),e.wButton(e,248,235,function(){e.controller.openURL()},e.controller,"more_games"),e.add(t),e.add(n),e.add(i),e.add(s),e.createSliders(),e}t.Window_Options=e}(BubbleHit=BubbleHit||{}),function(i){a=i.AppWindow,__extends(e,a),e.prototype.onShow=function(t){this.updateStatistic(t)},e.prototype.resetData=function(t){i.GameStats.resetStats(t),this.updateStatistic(t)},e.prototype.updateStatistic=function(t){var t=i.GameStats.loadStats(t),t=null==t?i.GameStats.DEFAULT_VALUES:t,e=parseInt(t.wins),t=parseInt(t.losses),n=Math.floor(e*(100/(e+t)))||0;this.textWins.setText(e.toString()),this.textLose.setText(t.toString()),this.textPercent.setText(n.toString())};var a,t=e;function e(t,e){var n=a.call(this,t,1,1)||this,t=new PhaserI18n.TranslatedText(n.game,-150,-300,"statistics",{font:"700 60px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),i=new PhaserI18n.TranslatedText(n.game,-400,-150,"wins",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),s=new PhaserI18n.TranslatedText(n.game,-400,-50,"losses_",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),o=new PhaserI18n.TranslatedText(n.game,-400,50,"winning_percentage",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10});return n.wButton(n,228,235,function(){AzerionIntegration.SDK.showInterstitialAd(function(){n.controller.closeWindow()})},n.controller,"ok"),n.wButton(n,-242,235,function(){AzerionIntegration.SDK.showInterstitialAd(function(){n.resetData(e)})},n,"reset_data"),n.textWins=new AlignText(n.add(n.game.make.text(400,-150,"-",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),n.textLose=new AlignText(n.add(n.game.make.text(400,-50,"-",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),n.textPercent=new AlignText(n.add(n.game.make.text(400,50,"-",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),n.add(t),n.add(i),n.add(s),n.add(o),n}i.Window_statistics=t}(BubbleHit=BubbleHit||{}),function(t){o=t.AppWindow,__extends(n,o),n.prototype.setStatistic=function(t){this.DataScore=t,this.DataBonus=t,this.DataTotalScore=this.DataScore+this.DataBonus},n.prototype.onShow=function(){this.updateStatistic()},n.prototype.updateStatistic=function(){this.textScore.setText(this.DataScore.toString()),this.textBonus.setText(this.DataBonus.toString()),this.textTotalScore.setText(this.DataTotalScore.toString())};var o,e=n;function n(t){var e=o.call(this,t,1,1)||this,t=new PhaserI18n.TranslatedText(e.game,-100,-300,"win",{font:"700 60px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),n=new PhaserI18n.TranslatedText(e.game,-400,-150,"score",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),i=new PhaserI18n.TranslatedText(e.game,-400,-50,"bonus",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10}),s=new PhaserI18n.TranslatedText(e.game,-400,50,"total_score",{font:"700 40px Arial",fill:"#ffffff",align:"center",stroke:"#19507D",strokeThickness:10});return e.wButton(e,0,230,function(){AzerionIntegration.SDK.showInterstitialAd(function(){e.controller.restartGame(e.game)})},e.controller,"ok"),e.add(t),e.add(n),e.add(i),e.add(s),e.textScore=new AlignText(e.add(e.game.make.text(400,-150,"-",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),e.textBonus=new AlignText(e.add(e.game.make.text(400,-50,"-",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),e.textTotalScore=new AlignText(e.add(e.game.make.text(400,50,"-",{font:"700 50px Arial",fill:"#ffffff",align:"center"}))),e}t.Window_win=e}(BubbleHit=BubbleHit||{}),function(t){e=Fabrique.State,__extends(i,e),i.prototype.init=function(){var e=this;null==t.GameStats.loadStats(this.game)&&t.GameStats.resetStats(this.game),"none"!==h5branding.Utils.LANGUAGE?this.game.i18n.setLanguage(h5branding.Utils.LANGUAGE):this.game.i18n.setLanguage(languageDetector.detect(["navigator"])),this.game.canvas.oncontextmenu=function(t){t.preventDefault()},this.input.maxPointers=1,this.scale.pageAlignHorizontally=!0,this.game.scale.windowConstraints.bottom="visual",this.game.device.desktop?(this.game.scale.setGameSize(1280,720),this.game.scale.setUserScale(.66,.66),this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL):(this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setGameSize(window.innerWidth,window.innerHeight),this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.scale.windowConstraints.right="layout",this.game.scale.windowConstraints.bottom="visual",window.addEventListener("resize",function(t){e.mobileResizeCallback(e.game.scale)}),this.mobileResizeCallback(this.game.scale))},i.prototype.mobileResizeCallback=function(t){var e,n,i=1;1.5<this.game.device.pixelRatio&&(i=.53*this.game.device.pixelRatio),window.innerWidth,window.innerHeight;i/=Math.round(window.innerHeight/560*10)/10,t.width===window.innerWidth*i&&t.height===window.innerHeight*i||(e=window.innerWidth*i,n=window.innerHeight*i,t.setGameSize(e,n),t.setUserScale(1/i,1/i)),t.refresh(),this.game.state.getCurrentState().resize()},i.prototype.preload=function(){var n=this;this.game.load.cacheBuster="undefined"==typeof version?null:version,this.game.load.image("4px","assets/images/4px.png"),this.game.load.onFileComplete.add(function(t){AzerionIntegration.SDK.onLoadProgress(t)}),this.game.load.onLoadComplete.add(function(){AzerionIntegration.SDK.onLoadComplete(n.game)}),AzerionIntegration.SDK.removeSplashLoader(function(){n.game.state.start(t.Menu.Name)}),Images.preloadList.forEach(function(t){n.game.load.image(t,"assets/images/"+t+".png")}),Atlases.preloadList.forEach(function(t){var e=1==Constants.SF?"x4":"x2";Atlases.preloadList.forEach(function(t){n.game.load.atlas(t,"assets/atlas/"+t+e+".png","assets/atlas/"+t+e+".json")})}),Sounds.preloadList.forEach(function(t){n.game.device.iOS?n.game.load.audio(t,["assets/sound/"+t+".m4a"]):n.game.load.audio(t,["assets/sound/"+t+".ogg","assets/sound/"+t+".mp3"])}),this.game.load.crossOrigin="anonymous",h5branding.Utils.getBrandingDomain()!==h5branding.BrandingDomain.Neutral&&this.game.load.image("branding_logo",h5branding.Branding.brandingLogoUrl)},i.prototype.create=function(){this.game.stage.backgroundColor="#BCDFF3",this.game.time.desiredFps=60},i.Name="booter";var e,n=i;function i(){var t=e.call(this)||this;return t.name=i.Name,t}t.Boot=n}(BubbleHit=BubbleHit||{}),function(t){e=Phaser.State,__extends(i,e),i.prototype.init=function(){},i.prototype.resize=function(){Constants.updateScaleValue(this.game),this.updateScale(),this.menuController.updateGroup(this.level.height,this.level.width)},i.prototype.preload=function(){},i.prototype.create=function(){var n=this;this.level=new BubbleShooter.LevelData,this.bubbleGroup=this.game.add.group(),this._bs=new BubbleShooter.BubbleHitGame(this.game,this.bubbleGroup),this._bs.stateChangedCallback=function(t,e){n.onStateChanged(t,e)},this._bs.init(this.level),this._bs.newGame(),this.background=this.game.make.sprite(-36,44,Images.gameBorder),this.background.inputEnabled=!0,(this.game.device.desktop?(this.background.events.onInputOver.add(function(){return n._bs.blockInput=!1}),this.background.events.onInputOut):(this.background.events.onInputDown.add(function(){return n._bs.blockInput=!1}),this.background.events.onInputUp)).add(function(){return n._bs.blockInput=!0}),this.bubbleGroup.add(this.background),this.menuController=new t.MenuController(this.game,this._bs),this.resize()},i.prototype.updateScale=function(){Constants.IS_PORTRAIT?(this.bubbleGroup.y=Constants.WCY-this.level.height/2*Constants.S*Constants.PM,this.bubbleGroup.x=Constants.WCX-this.level.width/2*Constants.S*Constants.PM,this.bubbleGroup.x+=30*Constants.S*Constants.PM,this.bubbleGroup.scale.set(Constants.S*Constants.PM)):(Constants.MIN_MODE?(Constants.S*=1.125,this.bubbleGroup.y=-20*Constants.S,this.bubbleGroup.x=65*Constants.S):(this.bubbleGroup.y=-20*Constants.S,this.bubbleGroup.x=Constants.WCX-this.level.width/2*Constants.S,this.bubbleGroup.x-=100*Constants.S),this.bubbleGroup.scale.set(Constants.S))},i.prototype.onStateChanged=function(t,e){e instanceof BubbleShooter.GameoverGameState?this.menuController.openWindow(3):e instanceof BubbleShooter.WinGameState&&this.menuController.openWindow(4)},i.prototype.update=function(){this._bs&&this._bs.update(this.game.time.physicsElapsed,this.game),this.menuController.updateScore(this._bs.score)},i.Name="menu";var e,n=i;function i(){var t=e.call(this)||this;return t.name=i.Name,t}t.Menu=n}(BubbleHit=BubbleHit||{});